<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>UNSW Escape-Room Editor</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ------ TOP-BAR ------ -->
  <header class="topbar">
    <span>Escape-Room Editor</span>
    <span>Dr Alex Nguyen</span>
    <a href="#">Manage</a>
    <a href="#">Log&nbsp;out</a>
  </header>

  <div class="layout">
    <!-- ------ SIDEBAR (thumbnails) ------ -->
    <aside class="sidebar" id="thumbs">
      <div class="thumb active"  data-tpl="tmpl-text"       ><div class="thumb-preview"></div></div>
      <div class="thumb"         data-tpl="tmpl-video"      ><div class="thumb-preview"></div></div>
      <div class="thumb"         data-tpl="tmpl-mcq"        ><div class="thumb-preview"></div></div>
      <div class="thumb"         data-tpl="tmpl-blank"      ><div class="thumb-preview"></div></div>
      <div class="thumb"         data-tpl="tmpl-interactive"><div class="thumb-preview"></div></div>
      <div class="thumb"         id="open-discuss"          ><div class="thumb-preview"><p style="margin:55% auto;text-align:center;font-size:2rem;">ðŸ’¬</p></div></div>
    </aside>

    <!-- ------ WHITEBOARD ------ -->
    <div class="whiteboard-wrapper">
      <div id="wb" class="whiteboard" contenteditable="true">
        Double-click and start typing your story â€¦
      </div>
    </div>

    <!-- ------ TOOLBAR ------ -->
    <aside class="toolbar">
      <h2>Slide settings</h2>
      <label>Background
        <input type="color" id="bgPicker" value="#ffffff">
      </label>
      <label>Text colour
        <input type="color" id="fgPicker" value="#000000">
      </label>
      <label>Font size (px)
        <input type="number" id="fsPicker" value="16" min="10" max="72">
      </label>
    </aside>
  </div>

  <!-- ------ TEMPLATES (hidden) ------ -->
  <template id="tmpl-text">
    Double-click and start typing your story â€¦
  </template>

  <template id="tmpl-video">
    <p>Paste a YouTube/Vimeo embed link:</p>
    <textarea placeholder="https://www.youtube.com/embed/â€¦"></textarea>
  </template>

  <template id="tmpl-mcq">
    <h3 contenteditable="true">What is the capital of Australia?</h3>
    <ul>
      <li contenteditable="true">Sydney</li>
      <li contenteditable="true">Melbourne</li>
      <li contenteditable="true">Canberra</li>
      <li contenteditable="true">Perth</li>
    </ul>
  </template>

  <template id="tmpl-blank">
    <p contenteditable="true">The chemical symbol for water is <u>______</u>.</p>
  </template>

  <template id="tmpl-interactive">
    <p><strong>Conditional Question (example)</strong></p>
    <p>If UID ends in odd â†’ 3 Ã— 7?â€ƒEven â†’ 8 + 5?</p>
  </template>

  <!-- ------ MODAL DISCUSSION BOARD ------ -->
  <div id="discussionModal" class="modal hidden">
    <div class="modal-card">
      <h3>Discussion Board</h3>
      <textarea id="post" placeholder="Write a postâ€¦"></textarea>
      <div style="display:flex;gap:.6rem;justify-content:flex-end">
        <button onclick="addPost()">Post</button>
        <button onclick="closeModal()">Close</button>
      </div>
      <hr style="margin:1rem 0">
      <div id="feed"></div>
    </div>
  </div>

  <!-- ------ JS (tiny) ------ -->
  <script>
    const wb=document.getElementById('wb');

    /* style controls */
    bgPicker.oninput=e=>wb.style.setProperty('--wb-bg',e.target.value);
    fgPicker.oninput=e=>wb.style.setProperty('--wb-color',e.target.value);
    fsPicker.oninput=e=>wb.style.fontSize=e.target.value+'px';

    /* generate thumbnails once */
    document.querySelectorAll('.thumb[data-tpl]').forEach(th=>{
      const tpl=document.getElementById(th.dataset.tpl);
      if(tpl) th.querySelector('.thumb-preview').innerHTML=tpl.innerHTML;
    });

    /* slide switching & modal trigger */
    document.querySelectorAll('#thumbs .thumb').forEach(th=>{
      th.onclick=()=>{
        if(th.id==='open-discuss'){openModal();return;}
        document.querySelectorAll('#thumbs .thumb').forEach(x=>x.classList.remove('active'));
        th.classList.add('active');
        wb.innerHTML=document.getElementById(th.dataset.tpl).innerHTML;
      };
    });

    /* modal helpers */
    const modal=document.getElementById('discussionModal');
    function openModal(){modal.classList.remove('hidden');}
    function closeModal(){modal.classList.add('hidden');}
    function addPost(){
      const txt=document.getElementById('post');
      if(!txt.value.trim())return;
      const div=document.createElement('div');
      div.style.margin='.55rem 0';div.textContent=txt.value;
      document.getElementById('feed').prepend(div);txt.value='';
    }
  </script>
</body>
</html>
